<?xml version="1.0" encoding="utf-8" standalone="no" ?>
<orm-designer version="1.4.3.457">

  <module import-format="DoctrineYml" import-path="schema.yml" name="demofony" visBkColor="16643574" visSizeX="50" visSizeX2="1123" visSizeY="0" visSizeY2="874">
    <table name="sfGuardUserProfile" visPositionX="589" visPositionY="648" visSizeX="0" visSizeX2="135" visSizeY="0" visSizeY2="185">
      <column name="user_id" primary="true" required="true" type="integer" unique="true"/>
      <column name="born_date" type="date"/>
      <column name="gender" type="integer"/>
      <column name="telephone" size="25" type="string"/>
      <column name="address" size="255" type="string"/>
      <column name="postal_code" size="10" type="string"/>
      <column name="location" size="150" type="string"/>
      <column name="province" size="150" type="string"/>
      <column name="country" size="150" type="string"/>
      <column name="web" size="255" type="string"/>
      <column name="about" type="clob"/>
      <column default="0" name="subscription_email" type="boolean"/>
      <orm-properties>
        <attribute name="actAs">
          <attribute name="Timestampable"/>
          <attribute name="Geographical"/>
          <attribute name="JCroppable">
            <attribute name="images">[image]</attribute>
          </attribute>
        </attribute>
      </orm-properties>
    </table>
    <table name="Category" visPositionX="159" visPositionY="525" visSizeX="0" visSizeX2="117" visSizeY="0" visSizeY2="59">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="name" required="true" size="100" type="string" unique="true"/>
      <column name="description" size="255" type="string"/>
    </table>
    <table name="Content" visPositionX="325" visPositionY="136" visSizeX="0" visSizeX2="98" visSizeY="0" visSizeY2="129">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer" unique="true"/>
      <column name="title" required="true" size="255" type="string"/>
      <column name="body" required="true" type="clob"/>
      <column name="video" size="255" type="string"/>
      <column default="1" name="active" required="true" type="boolean"/>
      <column default="0" name="views" size="16" type="integer"/>
      <column name="type" required="true" size="255" type="string"/>
      <column name="user_id" required="true" type="integer"/>
      <inheritance-parent discriminator-column="type" type="column_aggregation"/>
      <orm-properties>
        <attribute name="actAs">
          <attribute name="Timestampable"/>
          <attribute name="Sluggable">
            <attribute name="alias">slug</attribute>
            <attribute name="unique">true</attribute>
            <attribute name="fields">[type,title]</attribute>
            <attribute name="uniqueBy">[title,type]</attribute>
            <attribute name="options"></attribute>
          </attribute>
          <attribute name="Geographical"/>
          <attribute name="JCroppable">
            <attribute name="images">[image]</attribute>
          </attribute>
          <attribute name="Commentable"/>
        </attribute>
      </orm-properties>
    </table>
    <table name="Region" visPositionX="1" visPositionY="527" visSizeX="0" visSizeX2="117" visSizeY="0" visSizeY2="59">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="name" required="true" size="100" type="string" unique="true"/>
      <column name="description" size="255" type="string"/>
      <orm-properties>
        <attribute name="actAs">
          <attribute name="NestedSet">
            <attribute name="hasManyRoots">true</attribute>
            <attribute name="rootColumnName">root_id</attribute>
          </attribute>
        </attribute>
      </orm-properties>
    </table>
    <table name="Response" visPositionX="339" visPositionY="16" visSizeX="0" visSizeX2="70" visSizeY="0" visSizeY2="59">
      <column auto-increment="true" name="id" primary="true" type="integer"/>
      <column name="body" required="true" type="clob"/>
      <column name="content_id" type="integer"/>
    </table>
    <table name="VirtualMeeting" visPositionX="778" visPositionY="482" visSizeX="0" visSizeX2="126" visSizeY="0" visSizeY2="101">
      <column auto-increment="true" name="id" primary="true" type="integer"/>
      <column name="title" required="true" size="255" type="string"/>
      <column name="body" required="true" type="clob"/>
      <column name="user_id" required="true" type="integer"/>
      <column name="answers_start_date" required="true" type="date"/>
      <column name="answers_end_date" required="true" type="date"/>
    </table>
    <table name="VirtualMeetingAnswer" visPositionX="814" visPositionY="637" visSizeX="0" visSizeX2="99" visSizeY="0" visSizeY2="73">
      <column auto-increment="true" name="id" primary="true" type="integer"/>
      <column name="answer" required="true" type="clob"/>
      <column name="opinion_id" required="true" type="integer"/>
      <column name="user_id" required="true" type="integer"/>
    </table>
    <table name="SubscriptionCategory" visPositionX="258" visPositionY="656" visSizeX="0" visSizeX2="157" visSizeY="0" visSizeY2="60">
      <column name="user_id" primary="true" required="true" type="integer"/>
      <column name="category_id" primary="true" required="true" type="integer"/>
      <index name="IX_SubscriptionCategory_1" unique="true">
        <index-column name="user_id"/>
        <index-column name="category_id"/>
      </index>
    </table>
    <table name="SubscriptionRegion" visPositionX="42" visPositionY="661" visSizeX="0" visSizeX2="148" visSizeY="0" visSizeY2="60">
      <column name="user_id" primary="true" required="true" type="integer"/>
      <column name="region_id" primary="true" required="true" type="integer"/>
      <index name="IX_SubscriptionRegion_1" unique="true">
        <index-column name="user_id"/>
        <index-column name="region_id"/>
      </index>
    </table>
    <table name="CitizenProposal" visPositionX="77" visPositionY="305" visSizeX="0" visSizeX2="77" visSizeY="0" visSizeY2="31">
      <column name="tip" type="clob"/>
      <inheritance-child derived-from="Content" discriminator-value="CitizenProposal"/>
    </table>
    <table name="GovermentProposal" visPositionX="162" visPositionY="304" visSizeX="0" visSizeX2="93" visSizeY="0" visSizeY2="20">
      <inheritance-child derived-from="Content" discriminator-value="GovermentProposal"/>
    </table>
    <table name="GovermentNew" visPositionX="-2" visPositionY="302" visSizeX="0" visSizeX2="73" visSizeY="0" visSizeY2="20">
      <inheritance-child derived-from="Content" discriminator-value="GovermentNew"/>
    </table>
    <table name="GovermentConsultation" visPositionX="258" visPositionY="304" visSizeX="0" visSizeX2="109" visSizeY="0" visSizeY2="45">
      <column name="start_date" type="date"/>
      <column name="end_date" type="date"/>
      <inheritance-child derived-from="Content" discriminator-value="GovermentConsultation" visCenterX="0" visCenterY="0"/>
    </table>
    <table name="Workshop" visPositionX="373" visPositionY="305" visSizeX="0" visSizeX2="135" visSizeY="0" visSizeY2="129">
      <column name="author" size="150" type="string"/>
      <column name="action_date" type="date"/>
      <column name="location" size="255" type="string"/>
      <column name="min_users_allowed" type="integer"/>
      <column name="max_users_allowed" type="integer"/>
      <column name="register_start_date" type="date"/>
      <column name="register_end_date" type="date"/>
      <column name="price" type="decimal"/>
      <inheritance-child derived-from="Content" visCenterX="0" visCenterY="0"/>
    </table>
    <table name="CitizenAction" visPositionX="519" visPositionY="306" visSizeX="0" visSizeX2="135" visSizeY="0" visSizeY2="115">
      <column name="author" size="150" type="string"/>
      <column name="action_date" type="date"/>
      <column name="location" size="255" type="string"/>
      <column name="min_users_allowed" type="integer"/>
      <column name="max_users_allowed" type="integer"/>
      <column name="register_start_date" type="date"/>
      <column name="register_end_date" type="date"/>
      <inheritance-child derived-from="Content"/>
    </table>
    <table name="ContentHasRegion" visPositionX="2" visPositionY="394" visSizeX="0" visSizeX2="105" visSizeY="0" visSizeY2="60">
      <column name="region_id" primary="true" required="true" type="integer"/>
      <column name="content_id" primary="true" required="true" type="integer"/>
      <index name="IX_ContentHasRegion_1" unique="true">
        <index-column name="region_id"/>
        <index-column name="content_id"/>
      </index>
    </table>
    <table name="ContentHasCategory" visPositionX="126" visPositionY="393" visSizeX="0" visSizeX2="119" visSizeY="0" visSizeY2="60">
      <column name="category_id" primary="true" required="true" type="integer"/>
      <column name="content_id" primary="true" required="true" type="integer"/>
      <index name="IX_ContentHasCategories_1" unique="true">
        <index-column name="category_id"/>
        <index-column name="content_id"/>
      </index>
    </table>
    <table name="ActionHasUser" visPositionX="632" visPositionY="86" visSizeX="0" visSizeX2="127" visSizeY="0" visSizeY2="60">
      <column name="action_id" primary="true" required="true" type="integer"/>
      <column name="user_id" primary="true" required="true" type="integer"/>
      <index name="IX_ActionHasUser_1" unique="true">
        <index-column name="user_id"/>
        <index-column name="action_id"/>
      </index>
    </table>
    <orm-properties>
      <attribute name="actAs">
        <attribute name="Sluggable">
          <attribute name="unique">true</attribute>
        </attribute>
      </attribute>
    </orm-properties>
    <foreign-key from="sfGuardUserProfile" inverse-alias="User" name="FK_SfGuardUserProfile_sfGuardUser_id" owning-alias="Profile" to="sfGuardUser" visCenterX="0" visCenterY="0">
      <foreign-key-column from="user_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">CASCADE</attribute>
        <attribute name="side-inverse">
          <attribute name="type">one</attribute>
        </attribute>
        <attribute name="side-owning">
          <attribute name="type">one</attribute>
          <attribute name="cascade"></attribute>
        </attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key caption="sfGuardUser Content" from="Content" name="FK_Content_sfGuardUser_id" to="sfGuardUser">
      <foreign-key-column from="user_id" to="id"/>
    </foreign-key>
    <foreign-key from="Response" name="FK_Response_Proposal_id" to="Content" visCenterX="0" visCenterY="0">
      <foreign-key-column from="content_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">CASCADE</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="VirtualMeeting" name="FK_VirtualMeeting_sfGuardUser_id" to="sfGuardUser">
      <foreign-key-column from="user_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">CASCADE</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="VirtualMeetingAnswer" name="FK_VirtualMeetingAnswer_Opinion_id" to="Opinion" visCenterX="0" visCenterY="-39">
      <foreign-key-column from="opinion_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">CASCADE</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="VirtualMeetingAnswer" name="FK_VirtualMeetingAnswer_sfGuardUser_id" to="sfGuardUser">
      <foreign-key-column from="user_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">CASCADE</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key caption="sfGuardUserProfile SubscriptionCategory" from="SubscriptionCategory" name="FK_SubscriptionCategory_sfGuardUserProfile_user_id" to="sfGuardUserProfile">
      <foreign-key-column from="user_id" to="user_id"/>
      <orm-properties>
        <attribute name="onDelete">CASCADE</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key caption="Category SubscriptionCategory" from="SubscriptionCategory" name="FK_SubscriptionCategory_Category_id" to="Category" visCaption1X="0" visCaption1Y="0" visCenterX="0" visCenterY="0">
      <foreign-key-column from="category_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">CASCADE</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key caption="sfGuardUserProfile SubscriptionRegion" from="SubscriptionRegion" name="FK_SubscriptionRegion_sfGuardUserProfile_user_id" to="sfGuardUserProfile" visCaption1X="0" visCaption1Y="0" visCenterX="-155" visCenterY="0">
      <foreign-key-column from="user_id" to="user_id"/>
      <orm-properties>
        <attribute name="onDelete">CASCADE</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key caption="Region SubscriptionRegion" from="SubscriptionRegion" name="FK_SubscriptionRegion_Region_id" to="Region">
      <foreign-key-column from="region_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">CASCADE</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key caption="Region ContentHasRegion" from="ContentHasRegion" name="FK_ContentHasRegion_Region_id" to="Region">
      <foreign-key-column from="region_id" to="id"/>
    </foreign-key>
    <foreign-key caption="Content ContentHasRegion" from="ContentHasRegion" name="FK_ContentHasRegion_Content_id" to="Content">
      <foreign-key-column from="content_id" to="id"/>
    </foreign-key>
    <foreign-key caption="Category ContentHasCategories" from="ContentHasCategory" name="FK_ContentHasCategories_Category_id" to="Category">
      <foreign-key-column from="category_id" to="id"/>
    </foreign-key>
    <foreign-key caption="Content ContentHasCategories" from="ContentHasCategory" name="FK_ContentHasCategories_Content_id" to="Content" visCaption1X="0" visCaption1Y="0" visCenterX="0" visCenterY="0">
      <foreign-key-column from="content_id" to="id"/>
    </foreign-key>
    <foreign-key caption="Content ActionHasUser2" from="ActionHasUser" name="FK_ActionHasUser2_Content_id" to="Content">
      <foreign-key-column from="action_id" to="id"/>
    </foreign-key>
    <foreign-key caption="sfGuardUser ActionHasUser2" from="ActionHasUser" name="FK_ActionHasUser2_sfGuardUser_id" to="sfGuardUser">
      <foreign-key-column from="user_id" to="id"/>
    </foreign-key>
    <many-to-many-relation mn-table="SubscriptionCategory">
      <many-to-many-foreign-key foreign-key="FK_SubscriptionCategory_sfGuardUserProfile_user_id" relation-alias="Profiles"/>
      <many-to-many-foreign-key foreign-key="FK_SubscriptionCategory_Category_id" relation-alias="Categories"/>
    </many-to-many-relation>
    <many-to-many-relation mn-table="SubscriptionRegion">
      <many-to-many-foreign-key foreign-key="FK_SubscriptionRegion_sfGuardUserProfile_user_id" relation-alias="Profiles"/>
      <many-to-many-foreign-key foreign-key="FK_SubscriptionRegion_Region_id" relation-alias="Regions"/>
    </many-to-many-relation>
    <many-to-many-relation mn-table="ContentHasRegion">
      <many-to-many-foreign-key foreign-key="FK_ContentHasRegion_Region_id" relation-alias="Regions"/>
      <many-to-many-foreign-key foreign-key="FK_ContentHasRegion_Content_id" relation-alias="Contents"/>
    </many-to-many-relation>
    <many-to-many-relation mn-table="ContentHasCategory">
      <many-to-many-foreign-key foreign-key="FK_ContentHasCategories_Category_id" relation-alias="Categories"/>
      <many-to-many-foreign-key foreign-key="FK_ContentHasCategories_Content_id" relation-alias="Contents"/>
    </many-to-many-relation>
    <many-to-many-relation mn-table="ActionHasUser">
      <many-to-many-foreign-key foreign-key="FK_ActionHasUser2_Content_id" relation-alias="Actions"/>
      <many-to-many-foreign-key foreign-key="FK_ActionHasUser2_sfGuardUser_id" relation-alias="Users"/>
    </many-to-many-relation>
  </module>

</orm-designer>
